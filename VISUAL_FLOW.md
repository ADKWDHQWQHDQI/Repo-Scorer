# Visual Flow: AI-Driven Adaptive Questioning

## Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    START ASSESSMENT                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Ask Base Question 1   â”‚
            â”‚  (Fixed Question)      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  User Provides Answer  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   AI Classifies Answer         â”‚
        â”‚   (yes/partial/no/unsure)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Calculate Base Question Score       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ†• AI DECISION POINT (Adaptive Logic)            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  â€¢ Check if follow-up questions exist             â”‚
â”‚  â€¢ Evaluate answer completeness                   â”‚
â”‚  â€¢ Consider classification type                   â”‚
â”‚  â€¢ AI decides: Should we ask more?                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚
    â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Answer  â”‚         â”‚ Answer is    â”‚
â”‚ is      â”‚         â”‚ vague/partialâ”‚
â”‚ completeâ”‚         â”‚ or negative  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                     â”‚
     â”‚                     â–¼
     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚         â”‚  ğŸ” Trigger Follow-Up  â”‚
     â”‚         â”‚  Question (Dynamic)    â”‚
     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                     â”‚
     â”‚                     â–¼
     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚         â”‚  User Answers Follow-Upâ”‚
     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                     â”‚
     â”‚                     â–¼
     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚         â”‚  AI Classifies +      â”‚
     â”‚         â”‚  Score Follow-Up      â”‚
     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  More Base Questions? â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚
    â–¼                   â–¼
  [YES]               [NO]
    â”‚                   â”‚
    â”‚                   â–¼
    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚  Calculate Final    â”‚
    â”‚         â”‚  Score & Breakdown  â”‚
    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                    â”‚
    â”‚                    â–¼
    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚  AI Generates       â”‚
    â”‚         â”‚  Summary            â”‚
    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   ASSESSMENT COMPLETE   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Comparison: Before vs After

### BEFORE (Fixed Questionnaire)

```
Q1 â†’ Answer â†’ Classify â†’ Score â†’ Q2 â†’ Answer â†’ Classify â†’ Score â†’ ... â†’ Q15 â†’ END
                                                                            â†“
                                                                    Same for everyone
```

### AFTER (Adaptive Questioning)

```
                        â”Œâ”€ Follow-up? â”€â”
                        â”‚     YES       â”‚
Q1 â†’ Answer â†’ Classify â”€â”¤               â”œâ”€â†’ Follow-up Q â†’ Answer â†’ Score
                        â”‚     NO        â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
                        Continue to Q2
                                â†“
                        (Different path for each user)
```

---

## Example Scenario Paths

### Path A: Strong Repository

```
User Type: Experienced team with good practices

Q1: "Is CI/CD implemented?"
â””â”€â†’ "Yes, fully automated on all PRs" [YES]
    â””â”€â†’ AI: Skip follow-up âœ“

Q2: "Is branch protection enforced?"
â””â”€â†’ "Yes, 2 reviewers + tests required" [YES]
    â””â”€â†’ AI: Skip follow-up âœ“

Q3: "Are CODEOWNERS files used?"
â””â”€â†’ "Yes, for all critical paths" [YES]
    â””â”€â†’ AI: Skip follow-up âœ“

...15 questions total (no follow-ups)
Time: ~3 minutes
Score: ~95/100
```

### Path B: Developing Repository

```
User Type: Team improving their processes

Q1: "Is CI/CD implemented?"
â””â”€â†’ "Kind of, basic pipeline exists" [PARTIAL]
    â””â”€â†’ AI: Ask follow-up âœ“
        â””â”€â†’ FQ: "Does it run on all PRs?"
            â””â”€â†’ "Not all, only main branch" [PARTIAL]
                â””â”€â†’ Score: 2/2 (follow-up)

Q2: "Is branch protection enforced?"
â””â”€â†’ "Partially, only on main" [PARTIAL]
    â””â”€â†’ AI: Ask follow-up âœ“
        â””â”€â†’ FQ: "Is it enforced on all critical branches?"
            â””â”€â†’ "No, just main" [NO]
                â””â”€â†’ Score: 1/2 (follow-up)

Q3: "Are secrets prevented?"
â””â”€â†’ "No, not yet" [NO]
    â””â”€â†’ AI: Ask follow-up âœ“
        â””â”€â†’ FQ: "Is remediation tracked?"
            â””â”€â†’ "We're planning it" [UNSURE]
                â””â”€â†’ Score: 0.5/2 (follow-up)

...20 questions total (15 base + 5 follow-ups)
Time: ~5 minutes
Score: ~75/110
```

---

## AI Decision Logic

```python
def ai_decide_follow_up(original_question, user_answer, classification, follow_up):
    """
    AI evaluates context to decide if follow-up adds value
    """

    # AI considers:
    factors = [
        "Is the answer vague or incomplete?",
        "Did user already address the follow-up topic?",
        "Would follow-up clarify scoring?",
        "Is user engaged or fatigued?"
    ]

    # AI prompt:
    """
    Original: "{original_question}"
    Answer: "{user_answer}"
    Classification: {classification}
    Follow-up: "{follow_up}"

    Should we ask this follow-up? (yes/no)
    """

    # Returns:
    if ai_response == "yes":
        queue_follow_up()  # Add to pending questions
    else:
        skip_follow_up()   # Continue to next base question
```

---

## Scoring Evolution

### Before Enhancement

```
Total Points: 100
Distribution: 15 questions Ã— 6.67 points each
Everyone gets: Same 15 questions
```

### After Enhancement

```
Total Possible: 110 (100 base + 10 follow-ups)
Distribution:
  - Base: 15 Ã— 6.67 = 100 points
  - Follow-ups: 5 Ã— 2 = 10 points (conditional)

Strong repo:
  â†’ Answers: Mostly "yes" (complete)
  â†’ Follow-ups: 0-1
  â†’ Score: ~95/100 (95%)

Weak repo:
  â†’ Answers: Mostly "partial"/"no" (incomplete)
  â†’ Follow-ups: 4-5
  â†’ Score: ~75/110 (68%)
```

---

## Key Enhancement Points

### 1. **AI Controls Flow** (Agent-like)

- Not just classification
- Decides what happens next
- True adaptive behavior

### 2. **Context-Aware**

- Considers previous answer
- Evaluates completeness
- Avoids redundant questions

### 3. **User-Friendly**

- Strong teams: Faster assessment
- Weak teams: More thorough probing
- Natural conversation flow

### 4. **Technically Sound**

- Simple implementation (~172 lines)
- No breaking changes
- Backward compatible
- Fallback to rules if AI fails

---

## Testing Scenarios

### Test 1: Skip Follow-Up (Complete Answer)

```
Input:
  Q: "Is CI/CD implemented?"
  A: "Yes, GitHub Actions runs on every PR with required checks"

Expected:
  Classification: yes
  Follow-ups triggered: 0
  AI decision: Skip (answer is complete)
```

### Test 2: Trigger Follow-Up (Partial Answer)

```
Input:
  Q: "Is branch protection enforced?"
  A: "Sort of, we have some rules"

Expected:
  Classification: partial
  Follow-ups triggered: 1
  AI decision: Ask (answer is vague)
  Follow-up: "Are protections consistent across all critical branches?"
```

### Test 3: Trigger Follow-Up (Negative Answer)

```
Input:
  Q: "Are secrets prevented from being committed?"
  A: "No, not implemented"

Expected:
  Classification: no
  Follow-ups triggered: 1
  AI decision: Ask (improvement-oriented)
  Follow-up: "Are developers notified when secrets are detected?"
```

---

## Summary

**Enhancement**: AI-driven adaptive questioning
**Implementation**: 4 files, ~172 lines of code
**Impact**: Transforms fixed survey into intelligent conversation
**AI Role**: Classifies answers + Decides next question + Generates summary
**Value**: Better UX, stronger AI justification, minimal risk
